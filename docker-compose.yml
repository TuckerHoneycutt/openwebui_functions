version: '3.8'

services:
  open-webui:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: open-webui-template-formatter
    ports:
      - "3000:8080"
    volumes:
      # Persist OpenWebUI data
      - open-webui-data:/app/backend/data
      # Persist templates across container restarts
      - ./templates:/app/templates
      # Temp directory for generated PDFs
      - ./temp:/app/temp
      # Mount custom functions for easier updates (optional)
      - ./custom-functions:/app/custom-functions
    environment:
      # Template storage directory (persisted via volume)
      - TEMPLATE_STORAGE_DIR=/app/templates
      # PDF temp directory
      - PDF_TEMP_DIR=/app/temp
      # Add other OpenWebUI environment variables as needed
      # - OLLAMA_BASE_URL=http://host.docker.internal:11434
    restart: unless-stopped

volumes:
  open-webui-data:
